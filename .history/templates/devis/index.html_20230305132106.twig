{% extends 'base2.html.twig' %}

{% block title %}list Devis{% endblock %}
{% block Sidebar %} 
<!-- ======= Sidebar ======= -->
		
			<aside id="sidebar" class="sidebar">

				<ul class="sidebar-nav" id="sidebar-nav">


					<!-- End Forms Nav -->
					<li class="nav-item">
						<a class="nav-link " href="{{ path('app_devis_index')}}">
							<i class="bi bi-clipboard-data"></i>
							<span>Devis</span>
						</a>
					</li>

					<!-- End Tables Nav -->

					<li class="nav-item">
						<a class="nav-link " href="{{ path('app_locale_index')}}">
							<i class="bi bi-house-gear
                            
                            q"></i>
							<span>Locale</span>
						</a>
					</li>
					<!-- End Icons Nav -->
                    <li class="nav-item">
						<a class="nav-link " href="{{ path('app_devis_index')}}">
							<i class="bi bi-calendar2-date"></i>
							<span>Rendez_Vous</span>
						</a>
					</li>
					<!-- End Icons Nav -->
				
					<li class="nav-heading">
						Pages</li>

					<li class="nav-item">
						<a class="nav-link collapsed" href="users-profile.html">
							<i class="bi bi-person"></i>
							<span>Profile</span>
						</a>
					</li>
					<!-- End Profile Page Nav -->


					<li class="nav-item">
						<a class="nav-link collapsed" href="pages-login.html">
							<i class="bi bi-box-arrow-in-right"></i>
							<span>Logout</span>
						</a>
					</li>
					<!-- End Login Page Nav -->


				</ul>

			</aside>
			<!-- End Sidebar-->
{% endblock %}

{% block body %}
 <div class="container">
 <br>
 <br>
 <br>
    <h1>List Devis </h1>


    <div class="card">
            <div class="card-header">
                <a class="btn btn-outline-primary" href="{{ path('app_devis_new') }} "> 
                    cr√©er un nouveau devis
                </a>
			<div>
   {% set currentSort = app.request.query.get('sort') %}
{% set sortOrder = currentSort == 'asc' ? 'desc' : 'asc' %}
<a href="{{ path(app.request.attributes.get('_route'), app.request.query|merge({'sort': sortOrder})) }}">
    {% if currentSort == 'asc' %}
        Sort by date (ascending) <i class="fas fa-sort-up"></i>
    {% elseif currentSort == 'desc' %}
        Sort by date (descending) <i class="fas fa-sort-down"></i>
    {% else %}
        Sort by date <i class="fas fa-sort"></i>
    {% endif %}
</a>
</div>
            </div>
			
<div class="card-body">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Id</th>
           		<th>Nom Expert</th>
                <th>TotalHT</th>
				<th>Date</th>
                <th>Consulter</th>
				<th>Modifier</th>
				<th>Supprimer</th>
               
            </tr>
        </thead>
        <tbody>
        {% for devi in devis %}
            <tr>
              <td>{{ devi.id }}</td>
              <td>{{ devi.nom_expert ~ " " ~ devi.prenom_expert }}</td>
              <td>{{ devi.totalHt }}</td>
			 <td>{{ devi.date ? devi.date|date('Y-m-d') : '' }}</td> 
                    
                <td>
                 <form method="post" action="{{ path('app_devis_delete', {'id': devi.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                    <a  class="btn btn-outline-info" href="{{ path('app_devis_show', {'id': devi.id}) }}"><i class="bi bi-eye-fill"></i></a>
				</td>
                 <td >
                <a class="btn btn-outline-success " href="{{ path('app_devis_edit', {'id': devi.id}) }}"><i class="bi bi-pencil-square"></i></a>
              	</td>

				<td>
               <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ devi.id) }}">
            	<button class="btn btn-outline-danger"><i class="bi bi-trash3-fill"></i></button>
                  </form>
				  </td>
         
            </tr>
        {% else %}
            <tr>
                <td colspan="6">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
	
</div>
    
    </div>
{% endblock %}
